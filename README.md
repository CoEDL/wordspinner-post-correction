# Processing


## Flatten the media dir structure

Combine all images for each dictionary into a single directory. Call it all_images or something. Process the images so they are compressed and optimised (use third party software for this).

Flatten audio dir structure but keep separate per language, eg 

For home page content, create a file named `home.html` with the following structure (note that it is just a HTML snippet, not a full page).

```
<section id="feature_image">
    <img src="_assets/feature.jpg" alt="landscape" />
</section>
<section>
    <p>replace with home page content</p>
</section>
```

The complete content structure should look like this:
```  
- all_images
    - image01.jpg
    - image02.jpg

- all_audio
    - bilinarra
        - audio01.mp3
        - audio02.mp3
    - gurindji
        - audio03.mp3
        - audio04.mp3
- content
    - bilinarra
        - feature.jpg
        - home.html
        - zips
            - a-body-english.zip
            - a-body.zip
            - b-people-english.zip
            - b-people.zip
    - gurindji
    ...
- scripts
    - process.py
- output

```

## Prep the HTML

This script builds html pages for each domain of a selected language, or all languages. The HTML pages include a menu which is generated by the domains. The list of domains is derived from the names of zips. The HTML is responsive, though very basic. The script checks if images or audio are missing and removes tags for media that is missing. Reports are generated with lists of missing names.

To build the html, prepare the environment then run the `process.py` script. Debug first with a language named "test" by changing the debug setting in `main()` to `True`. The script doesn't accept any args, but you can specify or limit the lanuages it builds by changing the languages list in `main()`.

```
cd /Users/bbb/Sites/dictionaries
poetry shell
cd scripts
python process.py
```

When it completes, you should have `_assets`, `_audio`, `_img` folders and an index.html file in the output dir 


## Check

To test it locally, browse to the generated pages using local dev domains. Set local dev domain by changing httpd-custom.conf file in `~/Sites` and doing `brew services restart httpd`. 




## TODO

- remove () from the domains and zips?
- 
